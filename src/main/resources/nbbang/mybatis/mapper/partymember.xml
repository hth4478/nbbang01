<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="nbbang.mybatis.mapper.partymember">

	<resultMap type="partyMemberDTO" id="partyMemberDTOResult">
		<result column="pMNo" property="pMNo"/>
		<result column="partyNo" property="partyNo"/>
		<result column="pMMember" property="pMMember"/>
		<result column="partyLeader" property="partyLeader"/>
	</resultMap>
	
	<insert id="partyMemberInsert" parameterType="Map">
		<selectKey keyProperty="partyNo" resultType="partyMemberDTO" order="BEFORE">
			SELECT partyno as partyno
			FROM partybbs
			WHERE email = #{email}
			AND partytitle = #{partyTitle}
		</selectKey>
		INSERT INTO partymember
		VALUES(SEQ_partymember_pmno.NEXTVAL,#{partyNo},#{pMMember},#{partyLeader})
	</insert>
	
</mapper> 